<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard User - Info Konser</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <div class="navbar">
            <h1>ğŸµ Info Konser</h1>
            <div class="user-info">
                <span>Halo, <%= name %></span>
                <a href="/logout">Logout</a>
            </div>
        </div>

        
        <div class="content">
            <div class="welcome">
                <h2>Selamat Datang di Dashboard User!</h2>
                <p>Untuk melihat daftar konser, Anda perlu generate dan memasukkan API Key</p>
            </div>

            <% if (error && error.length > 0) { %>
                <div class="alert alert-error"><%= error %></div>
            <% } %>

            <% if (success && success.length > 0) { %>
                <div class="alert alert-success"><%= success %></div>
            <% } %>

            <!-- Card Generate API Key -->
            <div class="card">
                <h3>ğŸ”‘ Step 1: Generate API Key</h3>
                
                <% if (apiKey) { %>
                    <div class="info-box">
                        <p><strong>âœ“ Anda sudah memiliki API Key aktif!</strong></p>
                    </div>
                    
                    <div class="form-group">
                        <label>API Key Anda:</label>
                        <div class="api-key-display"><%= apiKey.api_key %></div>
                    </div>

                    <p style="color: #718096; margin-bottom: 15px;">
                        Salin API Key di atas dan masukkan pada form di bawah untuk akses daftar konser.
                    </p>

                    <form method="POST" action="/user/generate-api-key" style="display: inline;">
                        <button type="submit" class="btn btn-primary" onclick="return confirm('Generate API Key baru akan menonaktifkan API Key lama. Lanjutkan?')">
                            ğŸ”„ Generate API Key Baru
                        </button>
                    </form>
                <% } else { %>
                    <div class="info-box">
                        <p>Anda belum memiliki API Key. Klik tombol di bawah untuk generate API Key baru.</p>
                    </div>

                    <form method="POST" action="/user/generate-api-key">
                        <button type="submit" class="btn btn-primary">ğŸ”‘ Generate API Key</button>
                    </form>
                <% } %>
            </div>

            <div class="divider"></div>

            <!-- Card Input API Key -->
            <div class="card">
                <h3>ğŸ« Step 2: Masukkan API Key untuk Akses Konser</h3>
                
                <div class="info-box">
                    <p>Masukkan API Key Anda di bawah ini untuk mengakses daftar konser yang tersedia.</p>
                </div>

                <form method="POST" action="/user/validate-api-key">
                    <div class="form-group">
                        <label>Masukkan API Key:</label>
                        <input 
                            type="text" 
                            name="api_key" 
                            required 
                            placeholder="Paste API Key Anda di sini..."
                            <% if (apiKey) { %>value="<%= apiKey.api_key %>"<% } %>
                        >
                    </div>

                    <button type="submit" class="btn btn-success">âœ“ Validasi & Lihat Daftar Konser</button>
                </form>
            </div>
            <div style="text-align:center; margin-top:20px;">
    <a href="/user/api-explorer" class="btn btn-info" 
style="background:#4c6ef5; color:white; padding:10px 20px; border-radius:6px; text-decoration:none; margin-right: 10px;">
        ğŸ” API Explorer
    </a>
     <a href="/user/documentation" class="btn btn-info" 
       style="background:#805ad5; color:white; padding:10px 20px; border-radius:6px; text-decoration:none;">
        ğŸ“š Dokumentasi API
    </a>
</div>
        </div>
    </div>
</body>
</html>